!function(){function e(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function t(e,t,n){t=t.trim(),t.length&&e.classList[n].apply(e.classList,t.split(/\s+/))}function n(e,n){t(e,n,"add")}function o(e,n){t(e,n,"remove")}function i(e,t){var n;if(t.trim){n=m("div"),n.innerHTML=t;for(var o=0,i=n.childNodes.length;i>o;o++)e.appendChild(n.childNodes[o])}else e.appendChild(t)}function a(e){var t=/^(?:input|select|textarea|keygen)/i,n=/^(?:submit|button|image|reset|file)/i,o=/^(?:checkbox|radio)/i,i=/\[\]/,a=/\r?\n/g;return Array.prototype.slice.apply(e.elements).filter(function(e){return e.name&&!e.disabled&&t.test(e.nodeName)&&!n.test(e.type)&&(!o.test(e.type)||e.checked)}).map(function(e){return{name:e.name.replace(i,""),value:e.value.replace(a,"\r\n"),isArray:i.test(e.name)}}).reduce(function(e,t){return!e[t.name]&&t.isArray&&(e[t.name]=[]),t.isArray?e[t.name].push(t.value):e[t.name]=t.value,e},{})}function s(e,t,n){t.split(" ").forEach(function(t){e.addEventListener(t,n)})}function l(e,t,n){t=t.split(" ");var o=function(){t.forEach(function(t){e.removeEventListener(t,o)}),n()};t.forEach(function(t){e.addEventListener(t,o)})}function r(e,t,n){var o;try{o=new CustomEvent(t,{bubbles:!0,cancelable:!1,detail:n})}catch(i){o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,n)}e.dispatchEvent(o)}function u(e){return e[e.length-1]}function c(){}function d(){var t,d,f,g=document.body,v={dialogs:[],overlay:null,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{dijalog:"dijalog",content:"dijalog-content",overlay:"dijalog-overlay",close:"dijalog-close",closing:"dijalog-closing",open:"dijalog-open",hiding:"dijalog-hiding",hidden:"dijalog-hidden",visible:"dijalog-visible"},defaultOptions:{content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:g,className:"dijalog-theme-default",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{},beforeClose:c,afterClose:c},defaultDialogOptions:{callback:c,afterOpen:c,message:"Message",input:'<input name="dijalog" type="hidden" value="_dijalog-empty-value">',value:!1,buttons:[{text:"OK",type:"submit",className:"dijalog-button-primary"},{text:"Cancel",type:"button",className:"dijalog-button-secondary",click:function(){var e=v.findParentDialog(this);v.close(e.id)}}],showCloseButton:!1,onSubmit:function(e){var t=v.findParentDialog(this),n=t.contentElement.querySelector("form");e.preventDefault(),e.stopPropagation(),t.value=v.getFormValueOnSubmit(a(n)),v.close(t.id)},focusFirstInput:!0},defaultAlertOptions:{message:"Alert",buttons:[{text:"OK",type:"submit",className:"dijalog-button-primary"}]},defaultConfirmOptions:{message:"Confirm"},_close:function(e){var n=e.contentElement;r(n,"dijalogclose",e),n.parentNode.removeChild(n),v.dialogs.length?(o(t,v.baseClassNames.hiding),v.show()):this._hideOverlay(),r(g,"dijalogafterclose"),e.afterClose()},close:function(e){if(!v.dialogs.length)return!1;var i=v.get(e,!0);return i.beforeClose(i)!==!1&&(l(t,v.animationEndEvent,v._close.bind(this,i)),v.dialogs.length?n(t,v.baseClassNames.hiding):n(t,v.baseClassNames.closing),o(i.contentElement,v.baseClassNames.visible),f===i&&(f=null)),!0},closeAll:function(){for(;v.close(););},get:function(e,t){return t?e?v.dialogs.splice(e-1,1).pop():v.dialogs.pop():e?v.dialogs.slice(e-1,e).pop():u(v.dialogs)},_hide:function(e){o(t,v.baseClassNames.hiding),n(e.contentElement,v.baseClassNames.hidden),r(t,"dijaloghidden")},hide:function(e){if(!v.dialogs.length)return!1;var i=v.get(e);f===i&&(f=null),l(t,v.animationEndEvent,v._hide.bind(this,i)),n(t,v.baseClassNames.hiding),o(i.contentElement,v.baseClassNames.visible)},hideLoading:function(){d&&(d.parentNode.removeChild(d),d=null),v.dialogs.length||this._hideOverlay()},_showOverlay:function(o){var a;t||(t=m("div"),n(t,v.baseClassNames.dijalog),n(t,o.className),e(t,o.css),a=m("div"),n(a,v.baseClassNames.overlay),n(a,o.overlayClassName),e(a,o.overlayCSS),s(a,"click",function(e){f&&f.overlayClosesOnClick&&e.target===a&&v.close(o.id)}),i(t,a),i(o.appendLocation,t))},_hideOverlay:function(){t&&(t.parentNode.removeChild(t),t=null)},show:function(e){if(!v.dialogs.length)return!1;var t=v.get(e);o(t.contentElement,v.baseClassNames.hidden),n(t.contentElement,v.baseClassNames.visible),f=t},showLoading:function(e,o){e&&(o=p({},v.defaultOptions,o),this._showOverlay(o)),d||(d=m("div"),n(d,"dijalog-spinner"),n(d,v.defaultOptions.className),i(e?t:v.defaultOptions.appendLocation,d))},_open:function(o){var a,l;a=m("div"),n(a,v.baseClassNames.content+" "+v.baseClassNames.visible),n(a,o.contentClassName),e(a,o.contentCSS),i(a,o.content),i(t,a),o.showCloseButton&&(l=m("div"),n(l,v.baseClassNames.close),n(l,o.closeClassName),e(l,o.closeCSS),s(l,"click",function(){v.close(o.id)}),i(a,l)),o.contentElement=a,v.dialogs.push(o),o.id=v.dialogs.length,f=o,o.afterOpen&&o.afterOpen(o),setTimeout(function(){r(a,"dijalogopen",o)},0)},open:function(e){e=p({},v.defaultOptions,e),t?(v.hide(),l(t,"dijaloghidden",v._open.bind(v,e))):(this._showOverlay(e),this._open(e))},setupBodyClassName:function(){s(document,"dijalogopen",function(){n(g,v.baseClassNames.open)}),s(document,"dijalogclose",function(){v.dialogs.length||o(g,v.baseClassNames.open)})},findParentDialog:function(e){for(var t=function(t){return t.contentElement===e};e!==g;){if(e.classList.contains(v.baseClassNames.content))return v.dialogs.filter(t)[0];e=e.parentNode}return null},openDialog:function(e){var t=e.beforeClose,n=e.afterOpen;e=p({},v.defaultOptions,v.defaultDialogOptions,e),e.content=v.buildDialogForm(e),e.beforeClose=function(n){e.callback(n.value),t&&t(n)},e.focusFirstInput&&(e.afterOpen=function(e){var t=e.contentElement.querySelector('button[type="submit"], button[type="button"], input[type="submit"], input[type="button"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]');t&&t.focus(),n&&n(e)}),v.open(e)},alert:function(e){"string"==typeof e&&(e={message:e}),e=p({},v.defaultAlertOptions,e),v.openDialog(e)},confirm:function(e){if("string"==typeof e)throw new Error("dijalog.confirm(options) requires options.callback.");e=p({},v.defaultConfirmOptions,e),v.openDialog(e)},prompt:function(e){if("string"==typeof e)throw new Error("dijalog.prompt(options) requires options.callback.");var t={message:'<label for="dijalog">'+(e.label||"Prompt:")+"</label>",input:'<input name="dijalog" type="text" class="dijalog-prompt-input" placeholder="'+(e.placeholder||"")+'" value="'+(e.value||"")+'" />'};e=p({},t,e),v.openDialog(e)},buildDialogButtons:function(e){var t=m("div");return n(t,"dijalog-buttons"),e.forEach(function(e){var o=m("button");o.setAttribute("type",e.type),o.innerHTML=e.text,n(o,"dijalog-button"),n(o,e.className),e.click&&s(o,"click",function(t){e.click.call(this,t,v.findParentDialog(this))}),i(t,o)}),t},buildDialogForm:function(e){var t=m("form");n(t,"dijalog-form"),s(t,"submit",e.onSubmit);var o=m("div");if(o.innerHTML=e.message,n(o,"dijalog-message"),i(t,o),e.input){var a=m("div");n(a,"dijalog-input"),i(a,e.input),i(t,a)}return null!==e.buttons&&i(t,v.buildDialogButtons(e.buttons)),t},getFormValueOnSubmit:function(e){return e.dijalog?"_dijalog-empty-value"===e.dijalog?!0:e.dijalog:e}};return v.helpers={assign:p,on:s,once:l,trigger:r,serializeForm:a,css:e,addClass:n,removeClass:o,append:i,createElement:m,noop:c,last:u},v.setupBodyClassName(),window.addEventListener("keyup",function(e){f&&f.escapeButtonCloses&&27===e.keyCode&&v.close()}),v}var p=Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(void 0!==o&&null!==o){o=Object(o);for(var i=Object.keys(Object(o)),a=0,s=i.length;s>a;a++){var l=i[a],r=Object.getOwnPropertyDescriptor(o,l);void 0!==r&&r.enumerable&&(t[l]=o[l])}}}return t},m=document.createElement.bind(document);"function"==typeof define&&define.amd?define(d):"object"==typeof exports?module.exports=d():window.dijalog=d()}();
//# sourceMappingURL=dijalog.min.js.map